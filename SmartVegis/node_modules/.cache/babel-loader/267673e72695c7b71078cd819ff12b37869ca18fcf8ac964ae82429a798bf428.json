{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const LocationContext=/*#__PURE__*/createContext();export const useLocation=()=>{const context=useContext(LocationContext);if(!context){throw new Error('useLocation must be used within a LocationProvider');}return context;};export const LocationProvider=_ref=>{let{children}=_ref;const[location,setLocation]=useState(null);const[address,setAddress]=useState('Detecting location...');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const getAddressFromCoords=async(lat,lng)=>{try{// Using a free reverse geocoding API\nconst response=await fetch(\"https://nominatim.openstreetmap.org/reverse?format=json&lat=\".concat(lat,\"&lon=\").concat(lng));const data=await response.json();if(data.address){const{suburb,city,town,village,state,country}=data.address;const locality=suburb||city||town||village||'';const region=state||'';return\"\".concat(locality).concat(locality&&region?', ':'').concat(region);}return'Location detected';}catch(err){console.error('Error getting address:',err);return'Location detected';}};const detectLocation=()=>{setLoading(true);setError(null);if(!navigator.geolocation){setError('Geolocation is not supported by your browser');setAddress('Location not available');setLoading(false);return;}navigator.geolocation.getCurrentPosition(async position=>{const{latitude,longitude}=position.coords;setLocation({lat:latitude,lng:longitude});const addr=await getAddressFromCoords(latitude,longitude);setAddress(addr);setLoading(false);},err=>{console.error('Error getting location:',err);setError('Unable to retrieve your location');setAddress('Enable location access');setLoading(false);},{enableHighAccuracy:true,timeout:10000,maximumAge:300000// 5 minutes cache\n});};useEffect(()=>{detectLocation();},[]);const value={location,address,loading,error,detectLocation};return/*#__PURE__*/_jsx(LocationContext.Provider,{value:value,children:children});};export default LocationContext;","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","LocationContext","useLocation","context","Error","LocationProvider","_ref","children","location","setLocation","address","setAddress","loading","setLoading","error","setError","getAddressFromCoords","lat","lng","response","fetch","concat","data","json","suburb","city","town","village","state","country","locality","region","err","console","detectLocation","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","addr","enableHighAccuracy","timeout","maximumAge","value","Provider"],"sources":["C:/Users/hp/OneDrive/Desktop/Codeverse/SmartVegis/src/context/LocationContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst LocationContext = createContext();\r\n\r\nexport const useLocation = () => {\r\n  const context = useContext(LocationContext);\r\n  if (!context) {\r\n    throw new Error('useLocation must be used within a LocationProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const LocationProvider = ({ children }) => {\r\n  const [location, setLocation] = useState(null);\r\n  const [address, setAddress] = useState('Detecting location...');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getAddressFromCoords = async (lat, lng) => {\r\n    try {\r\n      // Using a free reverse geocoding API\r\n      const response = await fetch(\r\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`\r\n      );\r\n      const data = await response.json();\r\n      \r\n      if (data.address) {\r\n        const { suburb, city, town, village, state, country } = data.address;\r\n        const locality = suburb || city || town || village || '';\r\n        const region = state || '';\r\n        return `${locality}${locality && region ? ', ' : ''}${region}`;\r\n      }\r\n      return 'Location detected';\r\n    } catch (err) {\r\n      console.error('Error getting address:', err);\r\n      return 'Location detected';\r\n    }\r\n  };\r\n\r\n  const detectLocation = () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    if (!navigator.geolocation) {\r\n      setError('Geolocation is not supported by your browser');\r\n      setAddress('Location not available');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n        setLocation({ lat: latitude, lng: longitude });\r\n        \r\n        const addr = await getAddressFromCoords(latitude, longitude);\r\n        setAddress(addr);\r\n        setLoading(false);\r\n      },\r\n      (err) => {\r\n        console.error('Error getting location:', err);\r\n        setError('Unable to retrieve your location');\r\n        setAddress('Enable location access');\r\n        setLoading(false);\r\n      },\r\n      {\r\n        enableHighAccuracy: true,\r\n        timeout: 10000,\r\n        maximumAge: 300000 // 5 minutes cache\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    detectLocation();\r\n  }, []);\r\n\r\n  const value = {\r\n    location,\r\n    address,\r\n    loading,\r\n    error,\r\n    detectLocation\r\n  };\r\n\r\n  return (\r\n    <LocationContext.Provider value={value}>\r\n      {children}\r\n    </LocationContext.Provider>\r\n  );\r\n};\r\n\r\nexport default LocationContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}